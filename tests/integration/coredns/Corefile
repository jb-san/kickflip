# CoreDNS configuration for test.local domain
# Resolves *.test.local to the server container IP

test.local:53 {
    log
    errors
    
    # Wildcard: all *.test.local -> server IP
    template IN A {
        match .*\.test\.local
        answer "{{ .Name }} 60 IN A 172.28.0.10"
        fallthrough
    }
    
    # Specific hosts
    hosts {
        172.28.0.10 server.test.local
        172.28.0.20 client.test.local
        fallthrough
    }
}

# Forward other queries
.:53 {
    forward . 8.8.8.8 8.8.4.4
    cache 30
    errors
}

